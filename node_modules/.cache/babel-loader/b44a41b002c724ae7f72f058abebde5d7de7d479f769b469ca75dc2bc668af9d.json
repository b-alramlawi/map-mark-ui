{"ast":null,"code":"import _defineProperty from\"C:/Projects/NodeJSProjects/map-mark-ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Projects/NodeJSProjects/map-mark-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Projects/NodeJSProjects/map-mark-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Projects/NodeJSProjects/map-mark-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Projects/NodeJSProjects/map-mark-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import'../../styles/pages/authentication/LoginStyle.css';import SuccessMessage from\"../../components/SuccessMessage\";import FailedMessage from\"../../components/FailedMessage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){var history=useHistory();// Initialize useHistory\nvar _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoggingIn=_useState4[0],setIsLoggingIn=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),loginSuccess=_useState6[0],setLoginSuccess=_useState6[1];var handleFormSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;setIsLoggingIn(true);_context.next=5;return fetch('http://localhost:3000/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});case 5:response=_context.sent;if(!response.ok){_context.next=17;break;}_context.next=9;return response.json();case 9:data=_context.sent;// Parse response data\nsetLoginSuccess(true);console.log('Login successful');// Store the token in a global variable\nwindow.authToken=data.token;// Log the token\n// console.log('Token:', window.authToken);\nconsole.log('Token:',window.authToken);// Delay the redirection by 2 seconds\nsetTimeout(function(){history.push('/home');},2000);_context.next=19;break;case 17:// Login failed\nsetLoginSuccess(false);console.error('Login failed');case 19:_context.next=25;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](1);console.error('Error:',_context.t0);setLoginSuccess(false);case 25:_context.prev=25;setIsLoggingIn(false);return _context.finish(25);case 28:case\"end\":return _context.stop();}},_callee,null,[[1,21,25,28]]);}));return function handleFormSubmit(_x){return _ref.apply(this,arguments);};}();var handleInputChange=function handleInputChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",style:{backgroundImage:\"url(\".concat(process.env.PUBLIC_URL,\"/map.png)\")},children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"form-title\",children:\"Login\"}),loginSuccess===true&&/*#__PURE__*/_jsx(SuccessMessage,{message:\"Login successful!\"}),loginSuccess===false&&/*#__PURE__*/_jsx(FailedMessage,{message:\"Login failed. Please try again.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleInputChange,required:true,className:\"input-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleInputChange,required:true,className:\"input-field\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",disabled:isLoggingIn,children:isLoggingIn?'Logging in...':'Login'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"login-link\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Signup\"})]})]})});}export default LoginPage;","map":{"version":3,"names":["React","useState","useHistory","SuccessMessage","FailedMessage","jsx","_jsx","jsxs","_jsxs","LoginPage","history","_useState","email","password","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","isLoggingIn","setIsLoggingIn","_useState5","_useState6","loginSuccess","setLoginSuccess","handleFormSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","data","wrap","_callee$","_context","prev","next","preventDefault","fetch","method","headers","body","JSON","stringify","sent","ok","json","console","log","window","authToken","token","setTimeout","push","error","t0","finish","stop","_x","apply","arguments","handleInputChange","_e$target","target","name","value","_objectSpread","_defineProperty","className","style","backgroundImage","concat","process","env","PUBLIC_URL","children","message","onSubmit","htmlFor","type","id","onChange","required","disabled","href"],"sources":["C:/Projects/NodeJSProjects/map-mark-ui/src/pages/authentication/LoginPage.js"],"sourcesContent":["import React, {useState} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport '../../styles/pages/authentication/LoginStyle.css';\r\nimport SuccessMessage from \"../../components/SuccessMessage\";\r\nimport FailedMessage from \"../../components/FailedMessage\";\r\n\r\nfunction LoginPage() {\r\n    const history = useHistory(); // Initialize useHistory\r\n\r\n    const [formData, setFormData] = useState({\r\n        email: '',\r\n        password: '',\r\n    });\r\n\r\n    const [isLoggingIn, setIsLoggingIn] = useState(false);\r\n    const [loginSuccess, setLoginSuccess] = useState(null);\r\n\r\n    const handleFormSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            setIsLoggingIn(true);\r\n            const response = await fetch('http://localhost:3000/api/auth/login', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(formData),\r\n            });\r\n\r\n            if (response.ok) {\r\n                // Login successful\r\n                const data = await response.json(); // Parse response data\r\n                setLoginSuccess(true);\r\n                console.log('Login successful');\r\n\r\n                // Store the token in a global variable\r\n                window.authToken = data.token;\r\n\r\n                // Log the token\r\n                // console.log('Token:', window.authToken);\r\n\r\n\r\n                console.log('Token:', window.authToken);\r\n\r\n\r\n                // Delay the redirection by 2 seconds\r\n                setTimeout(() => {\r\n                    history.push('/home');\r\n                }, 2000);\r\n            } else {\r\n                // Login failed\r\n                setLoginSuccess(false);\r\n                console.error('Login failed');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            setLoginSuccess(false);\r\n        } finally {\r\n            setIsLoggingIn(false);\r\n        }\r\n    };\r\n\r\n    const handleInputChange = (e) => {\r\n        const {name, value} = e.target;\r\n        setFormData({...formData, [name]: value});\r\n    };\r\n\r\n    return (\r\n        <div className=\"login-container\" style={{backgroundImage: `url(${process.env.PUBLIC_URL}/map.png)`}}>\r\n            <div className=\"login-form\">\r\n                <h2 className=\"form-title\">Login</h2>\r\n                {loginSuccess === true && (\r\n                    <SuccessMessage message=\"Login successful!\"/>\r\n                )}\r\n                {loginSuccess === false && (\r\n                    <FailedMessage message=\"Login failed. Please try again.\"/>\r\n                )}\r\n                <form onSubmit={handleFormSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"email\">Email</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            id=\"email\"\r\n                            name=\"email\"\r\n                            value={formData.email}\r\n                            onChange={handleInputChange}\r\n                            required\r\n                            className=\"input-field\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            name=\"password\"\r\n                            value={formData.password}\r\n                            onChange={handleInputChange}\r\n                            required\r\n                            className=\"input-field\"\r\n                        />\r\n                    </div>\r\n                    <button type=\"submit\" className=\"submit-button\" disabled={isLoggingIn}>\r\n                        {isLoggingIn ? 'Logging in...' : 'Login'}\r\n                    </button>\r\n                </form>\r\n                <p className=\"login-link\">\r\n                    Don't have an account? <a href=\"/signup\">Signup</a>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}